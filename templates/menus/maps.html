{% extends 'shared.html' %}
{% load static %}
{% block content %}

<div id="map-loading">
    <img src="{% static 'img/logo.png' %}" alt="Logo" class="logo">
    <div class="loading-spinner"></div>
</div>
<div id="map"></div>

<script>
    let map;
    let currentPosition;
    let currentPositionMarker;

    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 7,
        });
        navigator.geolocation.getCurrentPosition(function (position) {
            currentPosition = {
                lat: position.coords.latitude,
                lng: position.coords.longitude
            };
            map.setCenter(currentPosition);
            map.setZoom(16);

            currentPositionMarker = new google.maps.Marker({
                position: currentPosition,
                map: map,
                title: "Your Current Location"
            });

            document.getElementById("map-loading").style.display = "none";
            document.getElementById("map").style.display = "block";
        });
    }
</script>

<script async
        src="https://maps.googleapis.com/maps/api/js?key={{ google_api_key }}&loading=async&libraries=places&callback=initMap">
</script>
{% endblock %}
